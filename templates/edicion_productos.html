{% extends "base.html" %}

{% block title %}Edición de Productos{% endblock %}

{% block content %}
<div class="container">
    <h1>Edición de Productos</h1>

    <!-- Espacio para buscar productos -->
    <div class="form-group">
        <label for="buscar-producto">Buscar Producto:</label>
        <input type="text" class="form-control" id="buscar-producto" placeholder="Ingrese nombre o código">
    </div>

    <button class="btn btn-primary" onclick="mostrarFormularioAgregar()">Agregar Producto</button>
    <div id="formulario" class="mt-3"></div> <!-- Contenedor para el formulario -->
    <div id="formulario-editar-container" class="mt-3"></div> <!-- Contenedor para el formulario de edición -->

    <table class="table table-striped mt-3">
        <thead>
            <tr>
                <th>ID</th>
                <th>Nombre</th>
                <th>Precio</th>
                <th>Stock</th>
                <th>Proveedor</th>
                <th>Código Item</th>
                <th>Unidad</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody id="productos-lista"></tbody>
    </table>
    <div id="contenedor-productos">
        <table class="table">
            <tbody id="productos-lista"></tbody>
        </table>
    
        <div id="ver-mas-container" class="text-center my-3">
            <button id="btn-ver-mas" class="btn btn-primary">Ver más</button>
            <p id="mensaje-fin" class="text-muted mt-2" style="display: none;">No hay más productos</p>
        </div>
    </div>
    
</div>
<!-- ========================================= -->
<!-- Modal para Editar Producto (Ventana Emergente) -->
<!-- ========================================= -->
<div
  class="modal fade"
  id="editarProductoModal"
  tabindex="-1"
  role="dialog"
  aria-labelledby="editarProductoModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      
      <!-- Cabecera del modal -->
      <div class="modal-header">
        <h5 class="modal-title" id="editarProductoModalLabel">
          Editar Producto
        </h5>
        <button
          type="button"
          class="close"
          data-dismiss="modal"
          aria-label="Cerrar"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      
      <!-- Cuerpo del modal: aquí se inyectará el formulario -->
      <div class="modal-body">
        <div id="modal-editar-form-container">
          <!-- El formulario se cargará aquí dinámicamente desde JS -->
        </div>
      </div>
      
      <!-- Pie del modal: botón Cancelar y Guardar Cambios -->
      <div class="modal-footer">
        <button
          type="button"
          class="btn btn-secondary"
          data-dismiss="modal"
        >
          Cancelar
        </button>
        <button
          type="submit"
          class="btn btn-primary"
          id="btn-guardar-cambios"
          form="form-editar-producto"
        >
          Guardar Cambios
        </button>
      </div>
    </div>
  </div>
</div>


{% endblock %}

{% block scripts %}
<!-- Scripts específicos de ESTA página (se ejecutan después de Bootstrap.js) -->
<script src="{{ url_for('static', filename='edicion_productos.js') }}"></script>
{% endblock %}